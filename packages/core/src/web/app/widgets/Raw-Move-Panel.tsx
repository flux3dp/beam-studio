import * as React from 'react';
import { useCallback, useRef, useState } from 'react';

import type { WorkAreaModel } from '@core/app/constants/workarea-constants';
import { getWorkarea } from '@core/app/constants/workarea-constants';
import { useDocumentStore } from '@core/app/stores/documentStore';
import DeviceMaster from '@core/helpers/device-master';

interface RawMovePanelProps {
  onMoveEnd: (x: number, y: number) => void;
  onMoveStart: () => void;
}

const getSafeDistance = (): { x: number; y: number } => {
  const { 'enable-diode': enableDiode } = useDocumentStore.getState();

  if (enableDiode) return { x: 45, y: 15 };

  return { x: 10, y: 15 };
};

const RawMovePanel = ({ onMoveEnd, onMoveStart }: RawMovePanelProps): React.JSX.Element => {
  const device = DeviceMaster.currentDevice.info;
  const workarea = getWorkarea(device.model as WorkAreaModel);

  const [currentX, setCurrentX] = useState(0);
  const [currentY, setCurrentY] = useState(0);
  const [feedrate] = useState(6000);
  const [isMoving, setIsMoving] = useState(false);
  const [safeDistance] = useState(() => getSafeDistance());
  const [workareaSize] = useState({ maxX: workarea.width, maxY: workarea.height });

  const currentXRef = useRef(currentX);
  const currentYRef = useRef(currentY);

  currentXRef.current = currentX;
  currentYRef.current = currentY;

  const handleMoveEnd = useCallback(
    (x: number, y: number) => {
      onMoveEnd?.(x, y);
    },
    [onMoveEnd],
  );

  const estimateMoveTime = useCallback(
    (x: number, y: number): Promise<void> => {
      const dist = Math.hypot(currentXRef.current - x, currentYRef.current - y);
      const estimatedTime = (dist / feedrate) * 60;

      return new Promise<void>((resolve) => {
        setTimeout(resolve, estimatedTime * 1000);
      });
    },
    [feedrate],
  );

  const rawMove = useCallback(
    async (x: number, y: number): Promise<void> => {
      if (isMoving) return;

      setIsMoving(true);
      onMoveStart?.();

      const newX = Math.max(0, Math.min(workareaSize.maxX - safeDistance.x, x));
      const newY = Math.max(0, Math.min(workareaSize.maxY - safeDistance.y, y));

      await DeviceMaster.rawMove({ f: feedrate, x: newX, y: newY });
      await estimateMoveTime(newX, newY);
      setCurrentX(newX);
      setCurrentY(newY);
      setIsMoving(false);
      handleMoveEnd(newX, newY);
    },
    [isMoving, onMoveStart, workareaSize, safeDistance, feedrate, estimateMoveTime, handleMoveEnd],
  );

  const rawHome = useCallback(async (): Promise<void> => {
    onMoveStart?.();
    await DeviceMaster.rawHome();
    setCurrentX(0);
    setCurrentY(0);
    handleMoveEnd(0, 0);
  }, [onMoveStart, handleMoveEnd]);

  const rawMoveRelative = useCallback(
    (x = 0, y = 0) => {
      rawMove(currentXRef.current + x, currentYRef.current + y);
    },
    [rawMove],
  );

  const moveToPoint = useCallback(
    (point: string) => {
      const pointsMap = {
        a: { x: 0, y: 0 },
        b: { x: workareaSize.maxX - safeDistance.x, y: 0 },
        c: { x: 0, y: workareaSize.maxY - safeDistance.y },
        d: { x: workareaSize.maxX - safeDistance.x, y: workareaSize.maxY - safeDistance.y },
      };
      const target = pointsMap[point];

      rawMove(target.x, target.y);
    },
    [rawMove, workareaSize, safeDistance],
  );

  return (
    <svg
      className="maintain-move-panel"
      preserveAspectRatio="none"
      version="1.1"
      viewBox="0 0 538 535.7"
      x="0px"
      y="0px"
    >
      <g>
        <path
          className="st0"
          d="M124.5,121.3l36.6,36.8l36.7,36.9l36.8,37c18.4-14,44-14,62.4,0l36.8-37l36.7-36.9l36.6-36.8l36.6-36.8
              c-0.2-0.2-0.3-0.3-0.5-0.5l0.5-0.5c0,0,0,0,0,0l0,0c-0.2-0.2-0.3-0.3-0.5-0.5l0.5-0.5c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0
              c-0.2-0.2-0.3-0.3-0.5-0.5l0.5-0.5c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c-0.2-0.2-0.3-0.3-0.5-0.5l0.5-0.5c0,0,0,0,0,0
              l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c-0.2-0.2-0.3-0.3-0.5-0.5l0.5-0.5c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0
              c-0.2-0.2-0.3-0.3-0.5-0.5l0.5-0.5c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c-0.2-0.2-0.3-0.3-0.5-0.5l0.5-0.5c0,0,0,0,0,0l0,0
              c-0.2-0.2-0.3-0.3-0.5-0.5l0.5-0.5c-99.8-95-256.1-95-355.9,0l0.5,0.5c-0.2,0.2-0.3,0.3-0.5,0.5l0,0c0,0,0,0,0,0l0.5,0.5
              c-0.2,0.2-0.3,0.3-0.5,0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0.5,0.5c-0.2,0.2-0.3,0.3-0.5,0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0
              c0,0,0,0,0,0l0.5,0.5c-0.2,0.2-0.3,0.3-0.5,0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0.5,0.5c-0.2,0.2-0.3,0.3-0.5,0.5
              l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0.5,0.5c-0.2,0.2-0.3,0.3-0.5,0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0.5,0.5
              c-0.2,0.2-0.3,0.3-0.5,0.5l0,0c0,0,0,0,0,0l0.5,0.5c-0.2,0.2-0.3,0.3-0.5,0.5L124.5,121.3z"
        />
        <path
          className="st0"
          d="M151,378.7l36.7-36.9l36.8-37c-0.1-0.2-0.3-0.4-0.4-0.6l0.4-0.4c0,0,0,0,0,0l0,0c-0.1-0.2-0.3-0.4-0.4-0.6
              l0.4-0.4c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c-0.1-0.2-0.3-0.4-0.4-0.5l0.4-0.4c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0
              c-0.1-0.2-0.3-0.4-0.4-0.5l0.4-0.4c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c-0.1-0.2-0.3-0.4-0.4-0.5l0.4-0.4c0,0,0,0,0,0
              l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c-0.1-0.2-0.3-0.4-0.4-0.5l0.4-0.4c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c-0.1-0.2-0.3-0.4-0.4-0.6
              l0.4-0.4c0,0,0,0,0,0l0,0c-0.1-0.2-0.3-0.4-0.4-0.6l0.4-0.4c-6.1-8.1-9.5-17.6-10.3-27.3c0.8-9.7,4.2-19.2,10.3-27.3l-0.4-0.4
              c0.1-0.2,0.3-0.4,0.4-0.6l0,0c0,0,0,0,0,0l-0.4-0.4c0.1-0.2,0.3-0.4,0.4-0.6l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l-0.4-0.4
              c0.1-0.2,0.3-0.4,0.4-0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l-0.4-0.4c0.1-0.2,0.3-0.4,0.4-0.5l0,0c0,0,0,0,0,0l0,0
              c0,0,0,0,0,0l0,0c0,0,0,0,0,0l-0.4-0.4c0.1-0.2,0.3-0.4,0.4-0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l-0.4-0.4
              c0.1-0.2,0.3-0.4,0.4-0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l-0.4-0.4c0.1-0.2,0.3-0.4,0.4-0.6l0,0c0,0,0,0,0,0l-0.4-0.4
              c0.1-0.2,0.3-0.4,0.4-0.6l-36.8-37L151,160.2l-36.6-36.8L77.8,86.5c-47.4,50.3-71,114.8-70.9,179.4c0,0.3,0,0.7,0,1c0,0,0,0,0,0
              c0,0.3,0,0.6,0,1c0,0,0,0,0,0c0,0,0,0,0,0c0,0.3,0,0.6,0,0.9c0,0,0,0,0,0c0,0,0,0,0,0c0,0,0,0,0,0c0,0.3,0,0.6,0,0.9c0,0,0,0,0,0
              c0,0,0,0,0,0c0,0,0,0,0,0c0,0.3,0,0.6,0,0.9c0,0,0,0,0,0c0,0,0,0,0,0c0,0.3,0,0.6,0,1c0,0,0,0,0,0c0,0.3,0,0.7,0,1
              c-0.1,64.5,23.5,129.1,70.9,179.4l36.6-36.8L151,378.7z"
        />
        <path
          className="st0"
          d="M453.9,86.5l-36.6,36.8l-36.6,36.8L343.9,197l-36.8,37c0.1,0.2,0.3,0.4,0.4,0.6l-0.4,0.4c0,0,0,0,0,0l0,0
              c0.1,0.2,0.3,0.4,0.4,0.6l-0.4,0.4c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0.1,0.2,0.3,0.4,0.4,0.5l-0.4,0.4c0,0,0,0,0,0l0,0c0,0,0,0,0,0
              l0,0c0,0,0,0,0,0l0,0c0.1,0.2,0.3,0.4,0.4,0.5l-0.4,0.4c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0.1,0.2,0.3,0.4,0.4,0.5
              l-0.4,0.4c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0.1,0.2,0.3,0.4,0.4,0.5l-0.4,0.4c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0
              c0.1,0.2,0.3,0.4,0.4,0.6l-0.4,0.4c0,0,0,0,0,0l0,0c0.1,0.2,0.3,0.4,0.4,0.6l-0.4,0.4c6.1,8.1,9.5,17.6,10.3,27.3
              c-0.8,9.7-4.2,19.2-10.3,27.3l0.4,0.4c-0.1,0.2-0.3,0.4-0.4,0.6l0,0c0,0,0,0,0,0l0.4,0.4c-0.1,0.2-0.3,0.4-0.4,0.6l0,0c0,0,0,0,0,0
              l0,0c0,0,0,0,0,0l0.4,0.4c-0.1,0.2-0.3,0.4-0.4,0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0.4,0.4
              c-0.1,0.2-0.3,0.4-0.4,0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0.4,0.4c-0.1,0.2-0.3,0.4-0.4,0.5l0,0c0,0,0,0,0,0l0,0
              c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0.4,0.4c-0.1,0.2-0.3,0.4-0.4,0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0.4,0.4c-0.1,0.2-0.3,0.4-0.4,0.6
              l0,0c0,0,0,0,0,0l0.4,0.4c-0.1,0.2-0.3,0.4-0.4,0.6l36.8,37l36.7,36.9l36.6,36.8l36.6,36.8c47.4-50.3,71-114.8,70.9-179.4
              c0-0.3,0-0.7,0-1c0,0,0,0,0,0c0-0.3,0-0.6,0-1c0,0,0,0,0,0c0,0,0,0,0,0c0-0.3,0-0.6,0-0.9c0,0,0,0,0,0c0,0,0,0,0,0c0,0,0,0,0,0
              c0-0.3,0-0.6,0-0.9c0,0,0,0,0,0c0,0,0,0,0,0c0,0,0,0,0,0c0-0.3,0-0.6,0-0.9c0,0,0,0,0,0c0,0,0,0,0,0c0-0.3,0-0.6,0-1c0,0,0,0,0,0
              c0-0.3,0-0.7,0-1C524.9,201.4,501.3,136.8,453.9,86.5z"
        />
        <path
          className="st0"
          d="M407.1,417.5l-36.6-36.8l-36.7-36.9l-36.8-37c-18.4,14-44,14-62.4,0l-36.8,37l-36.7,36.9l-36.6,36.8
              l-36.6,36.8c0.2,0.2,0.3,0.3,0.5,0.5l-0.5,0.5c0,0,0,0,0,0l0,0c0.2,0.2,0.3,0.3,0.5,0.5l-0.5,0.5c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0
              c0.2,0.2,0.3,0.3,0.5,0.5l-0.5,0.5c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0.2,0.2,0.3,0.3,0.5,0.5l-0.5,0.5c0,0,0,0,0,0
              l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0.2,0.2,0.3,0.3,0.5,0.5l-0.5,0.5c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0
              c0.2,0.2,0.3,0.3,0.5,0.5l-0.5,0.5c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0.2,0.2,0.3,0.3,0.5,0.5l-0.5,0.5c0,0,0,0,0,0l0,0
              c0.2,0.2,0.3,0.3,0.5,0.5l-0.5,0.5c99.8,95,256.1,95,355.9,0l-0.5-0.5c0.2-0.2,0.3-0.3,0.5-0.5l0,0c0,0,0,0,0,0l-0.5-0.5
              c0.2-0.2,0.3-0.3,0.5-0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l-0.5-0.5c0.2-0.2,0.3-0.3,0.5-0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0
              c0,0,0,0,0,0l-0.5-0.5c0.2-0.2,0.3-0.3,0.5-0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l-0.5-0.5c0.2-0.2,0.3-0.3,0.5-0.5
              l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l-0.5-0.5c0.2-0.2,0.3-0.3,0.5-0.5l0,0c0,0,0,0,0,0l0,0c0,0,0,0,0,0l-0.5-0.5
              c0.2-0.2,0.3-0.3,0.5-0.5l0,0c0,0,0,0,0,0l-0.5-0.5c0.2-0.2,0.3-0.3,0.5-0.5L407.1,417.5z"
        />
      </g>
      <path
        className="st1 move-btn"
        d="M297.2,222.8l37-37c-39.1-34.1-97.6-34.1-136.7,0l37,37C253,208.8,278.7,208.8,297.2,222.8z"
        onMouseUp={() => rawMoveRelative(0, -0.1)}
      />
      <path
        className="st2 move-btn"
        d="M187.3,196l-36.9-36.9c-54.4,59.5-54.4,150.8,0,210.4l36.9-36.9C153.2,293.5,153.2,235.1,187.3,196z"
        onMouseUp={() => rawMoveRelative(-1, 0)}
      />
      <path
        className="st2 move-btn"
        d="M334.2,342.8c-39.1,34.1-97.6,34.1-136.7,0l-36.9,36.9c59.5,54.4,150.8,54.4,210.4,0L334.2,342.8z"
        onMouseUp={() => rawMoveRelative(0, 1)}
      />
      <path
        className="st2 move-btn"
        d="M197.5,185.8c39.1-34.1,97.6-34.1,136.7,0L371,149c-59.5-54.4-150.8-54.4-210.4,0L197.5,185.8z"
        onMouseUp={() => rawMoveRelative(0, -1)}
      />
      <path
        className="st3 move-btn"
        d="M160.6,149c59.5-54.4,150.8-54.4,210.4,0l36.8-36.8c-79.9-74.7-204.1-74.7-284,0L160.6,149z"
        onMouseUp={() => rawMoveRelative(0, -10)}
      />
      <path
        className="st3 move-btn"
        d="M371,379.7c-59.5,54.4-150.8,54.4-210.4,0l-36.8,36.8c79.9,74.7,204.1,74.7,284,0L371,379.7z"
        onMouseUp={() => rawMoveRelative(0, 10)}
      />
      <path
        className="st3 move-btn"
        d="M150.5,369.5c-54.4-59.5-54.4-150.8,0-210.4l-36.8-36.8c-74.7,79.9-74.7,204.1,0,284L150.5,369.5z"
        onMouseUp={() => rawMoveRelative(-10, 0)}
      />
      <path
        className="st2 move-btn"
        d="M344.3,332.7l36.9,36.9c54.4-59.5,54.4-150.8,0-210.4L344.3,196C378.5,235.1,378.5,293.5,344.3,332.7z"
        onMouseUp={() => rawMoveRelative(1, 0)}
      />
      <path
        className="st3 move-btn"
        d="M418,122.3l-36.8,36.8c54.4,59.5,54.4,150.8,0,210.4l36.8,36.8C492.7,326.4,492.7,202.2,418,122.3z"
        onMouseUp={() => rawMoveRelative(10, 0)}
      />
      <path
        className="st4 xmax-btn "
        d="M454.8,85.5L418,122.3c74.7,79.9,74.7,204.1,0,284l36.8,36.8C549.9,342.9,549.9,185.8,454.8,85.5z"
        onMouseUp={() => rawMove(workareaSize.maxX - safeDistance.x, currentY)}
      />
      <path
        className="st4 ymin-btn"
        d="M123.8,112.1c79.9-74.7,204.1-74.7,284,0l36.8-36.8c-100.3-95-257.4-95-357.7,0L123.8,112.1z"
        onMouseUp={() => rawMove(currentX, 0)}
      />
      <path
        className="st4 xmin-btn"
        d="M113.6,406.3c-74.7-79.9-74.7-204.1,0-284L76.8,85.5c-95,100.3-95,257.4,0,357.7L113.6,406.3z"
        onMouseUp={() => rawMove(0, currentY)}
      />
      <path
        className="st4 ymax-btn"
        d="M407.8,416.5c-79.9,74.7-204.1,74.7-284,0L87,453.3c100.3,95,257.4,95,357.7,0L407.8,416.5z"
        onMouseUp={() => rawMove(currentX, workareaSize.maxY - safeDistance.y)}
      />
      <g>
        <path
          className="st5"
          d="M36.3,269.6L36.3,269.6l-12.1-3.1v-4.1h16.3v3.1H30.3l0,0.1l10.3,2.9v2.1l-10.2,2.9l0,0.1h10.2v3.1H24.3v-4.1
              L36.3,269.6z"
        />
        <path className="st5" d="M40.5,256.6v3.1H24.3v-3.1H40.5z" />
        <path className="st5" d="M40.5,242.4v3.2l-10.4,5.2l0,0.1h10.4v3.2H24.3v-3.2l10.4-5.2l0-0.1H24.3v-3.2H40.5z" />
      </g>
      <g>
        <path
          className="st5"
          d="M495.2,246.7L495.2,246.7l12.1,3.1v4.1H491v-3.1h10.2l0-0.1l-10.3-2.9v-2.1l10.2-2.9l0-0.1H491v-3.1h16.3v4.1
              L495.2,246.7z"
        />
        <path
          className="st5"
          d="M494.5,263.8v-4.1l-3.5-0.9v-3.3l16.3,4.6v3.3L491,268v-3.3L494.5,263.8z M497,260.3v2.8l5.2-1.4v-0.1
              L497,260.3z"
        />
        <path
          className="st5"
          d="M501.5,274.4L501.5,274.4l5.8,2.4v3.7l-8.1-4l-8.2,4.3v-3.8l5.9-2.4v-0.1L491,272v-3.7l8.2,4.1l8.1-4.1v3.6
              L501.5,274.4z"
        />
      </g>
      <g>
        <path
          className="st5"
          d="M249.1,500.4L249.1,500.4l3.1-12.1h4.1v16.3h-3.1v-10.2l-0.1,0l-2.9,10.3h-2.1l-2.9-10.2l-0.1,0v10.2H242
              v-16.3h4.1L249.1,500.4z"
        />
        <path
          className="st5"
          d="M266.2,501.1h-4.1l-0.9,3.5h-3.3l4.6-16.3h3.3l4.6,16.3h-3.3L266.2,501.1z M262.8,498.6h2.8l-1.4-5.2h-0.1
              L262.8,498.6z"
        />
        <path
          className="st5"
          d="M276.8,494.1L276.8,494.1l2.4-5.8h3.7l-4,8.1l4.3,8.2h-3.8l-2.4-5.9h-0.1l-2.4,5.9h-3.7l4.1-8.2l-4.1-8.1h3.6
              L276.8,494.1z"
        />
      </g>
      <g>
        <path
          className="st5"
          d="M251.9,36.8L251.9,36.8l3.1-12.1h4.1V41H256V30.7l-0.1,0L253,41h-2.1L248,30.8l-0.1,0V41h-3.1V24.7h4.1
              L251.9,36.8z"
        />
        <path className="st5" d="M264.9,41h-3.1V24.7h3.1V41z" />
        <path className="st5" d="M279.2,41H276l-5.2-10.4l-0.1,0V41h-3.2V24.7h3.2l5.2,10.4l0.1,0V24.7h3.2V41z" />
      </g>
      <g id="svg-home-btn" onMouseUp={() => rawHome()}>
        <g>
          <g>
            <path
              className="st0"
              d="M302.6,232.5c-20.3-20.3-53.3-20.3-73.6,0c-20.3,20.3-20.3,53.3,0,73.6c20.3,20.3,53.3,20.3,73.6,0
                              C323,285.8,323,252.9,302.6,232.5z"
            />
          </g>
          <g>
            <path
              className="st6"
              d="M302.6,227.5c-20.3-20.3-53.3-20.3-73.6,0c-20.3,20.3-20.3,53.3,0,73.6c20.3,20.3,53.3,20.3,73.6,0
                              C323,280.8,323,247.9,302.6,227.5z"
            />
          </g>
        </g>
        <g>
          <path className="st5" d="M250.5,272.5h-3.1v-6.8h-5.2v6.8H239v-16.3h3.2v7h5.2v-7h3.1V272.5z" />
          <path
            className="st5"
            d="M264.6,266.6c0,1.9-0.5,3.4-1.6,4.5c-1.1,1.1-2.5,1.6-4.3,1.6c-1.8,0-3.2-0.5-4.3-1.6
                          c-1.1-1.1-1.6-2.6-1.6-4.5v-4.5c0-1.9,0.5-3.4,1.6-4.5c1.1-1.1,2.5-1.6,4.3-1.6c1.8,0,3.2,0.5,4.3,1.6c1.1,1.1,1.6,2.6,1.6,4.5
                          V266.6z M261.5,262c0-1.2-0.2-2.1-0.7-2.7c-0.5-0.6-1.2-0.9-2.1-0.9c-0.9,0-1.6,0.3-2.1,0.9c-0.5,0.6-0.7,1.5-0.7,2.7v4.6
                          c0,1.2,0.2,2.1,0.7,2.7c0.5,0.6,1.2,0.9,2.1,0.9c0.9,0,1.6-0.3,2.1-0.9c0.5-0.6,0.7-1.5,0.7-2.7V262z"
          />
          <path
            className="st5"
            d="M273.9,268.3L273.9,268.3l3.1-12.1h4.1v16.3H278v-10.2l-0.1,0l-2.9,10.3h-2.1l-2.9-10.2l-0.1,0v10.2h-3.1
                          v-16.3h4.1L273.9,268.3z"
          />
          <path className="st5" d="M291.7,265.3h-5v4.7h6v2.5h-9.1v-16.3h9.1v2.5h-5.9v4.2h5V265.3z" />
        </g>
      </g>
      <g>
        <polygon className="st5" points="395.9,264.3 385.4,252.2 385.4,276.5 " />
        <polygon className="st5" points="406.5,264.3 395.9,252.2 395.9,276.5 " />
      </g>
      <g>
        <polygon className="st5" points="135.7,264.3 146.2,276.5 146.2,252.2 " />
        <polygon className="st5" points="125.2,264.3 135.7,276.5 135.7,252.2 " />
      </g>
      <g>
        <polygon className="st5" points="265.8,394.5 278,383.9 253.7,383.9 " />
        <polygon className="st5" points="265.8,405 278,394.5 253.7,394.5 " />
      </g>
      <polygon className="st5" points="265.8,176.6 253.7,197.7 278,197.7 " />
      <g>
        <polygon className="st5" points="265.8,134.2 253.7,144.7 278,144.7 " />
        <polygon className="st5" points="265.8,123.7 253.7,134.2 278,134.2 " />
      </g>
      <g>
        <g>
          <polygon className="st5" points="443.4,264.3 436.4,252.2 436.4,276.5 " />
          <polygon className="st5" points="450.2,264.3 443.2,252.2 443.2,276.5 " />
          <polygon className="st5" points="456.9,264.3 450,252.2 450,276.5 " />
        </g>
        <g>
          <polygon className="st5" points="88.3,264.3 95.3,276.5 95.3,252.2 " />
          <polygon className="st5" points="81.5,264.3 88.5,276.5 88.5,252.2 " />
          <polygon className="st5" points="74.7,264.3 81.7,276.5 81.7,252.2 " />
        </g>
      </g>
      <g>
        <g>
          <polygon className="st5" points="443.4,264.3 436.4,252.2 436.4,276.5 " />
          <polygon className="st5" points="450.2,264.3 443.2,252.2 443.2,276.5 " />
          <polygon className="st5" points="456.9,264.3 450,252.2 450,276.5 " />
        </g>
        <g>
          <polygon className="st5" points="88.3,264.3 95.3,276.5 95.3,252.2 " />
          <polygon className="st5" points="81.5,264.3 88.5,276.5 88.5,252.2 " />
          <polygon className="st5" points="74.7,264.3 81.7,276.5 81.7,252.2 " />
        </g>
      </g>
      <g>
        <g>
          <polygon className="st5" points="265.8,441.9 278,434.9 253.7,434.9 " />
          <polygon className="st5" points="265.8,448.7 278,441.7 253.7,441.7 " />
          <polygon className="st5" points="265.8,455.5 278,448.5 253.7,448.5 " />
        </g>
        <g>
          <polygon className="st5" points="265.8,86.8 253.7,93.8 278,93.8 " />
          <polygon className="st5" points="265.8,80 253.7,87 278,87 " />
          <polygon className="st5" points="265.8,73.2 253.7,80.2 278,80.2 " />
        </g>
      </g>
      <path
        className="st1 move-btn"
        d="M234.5,305.9l-37,37c39.1,34.1,97.6,34.1,136.7,0l-37-37C278.7,319.9,253,319.9,234.5,305.9z"
        onMouseUp={() => rawMoveRelative(0, 0.1)}
      />
      <polygon className="st5" points="265.8,352.1 278,331 253.7,331 " />
      <path
        className="st1 move-btn"
        d="M224.3,233l-37-37c-34.1,39.1-34.1,97.6,0,136.7l37-37C210.3,277.2,210.3,251.5,224.3,233z"
        onMouseUp={() => rawMoveRelative(-0.1, 0)}
      />
      <path
        className="st1 move-btn"
        d="M344.3,196l-37,37c14,18.5,14,44.2,0,62.7l37,37C378.5,293.5,378.5,235.1,344.3,196z"
        onMouseUp={() => rawMoveRelative(0.1, 0)}
      />
      <polygon className="st5" points="353.5,264.3 332.5,252.2 332.5,276.5 " />
      <polygon className="st5" points="178.1,264.3 199.2,276.5 199.2,252.2 " />
      <g className="dest-btn" id="dest-A-btn" onMouseUp={() => moveToPoint('a')}>
        <g>
          <g>
            <path
              className="st6"
              d="M86.6,42.5V13.1c0-2.8-2.3-5.1-5.1-5.1H5.1C2.3,8,0,10.3,0,13.1v76.3c0,2.8,2.3,5.1,5.1,5.1h29.3c1.6,0,3.1-0.7,4-2C52,75.5,67.5,60,84.6,46.5C85.8,45.5,86.6,44.1,86.6,42.5z"
            />
          </g>
          <g>
            <path
              className="st1"
              d="M86.6,34.5V5.1c0-2.8-2.3-5.1-5.1-5.1H5.1C2.3,0,0,2.3,0,5.1v76.3c0,2.8,2.3,5.1,5.1,5.1h29.3c1.6,0,3.1-0.7,4-2C52,67.5,67.5,52,84.6,38.5C85.8,37.5,86.6,36.1,86.6,34.5z"
            />
          </g>
        </g>
        <g>
          <path
            className="st7"
            d="M64.3,12.9L64.3,12.9l1.9-7.2h2.5v9.8h-1.9V9.3l0,0L65,15.4h-1.3L62,9.3l0,0v6.1H60V5.7h2.5L64.3,12.9z"
          />
          <path className="st7" d="M72.1,15.4h-1.9V5.7h1.9V15.4z" />
          <path className="st7" d="M80.7,15.4h-1.9l-3.1-6.2l0,0v6.2h-1.9V5.7h1.9l3.1,6.2l0,0V5.7h1.9V15.4z" />
        </g>
        <g>
          <path
            className="st5"
            d="M44.2,46.2h-8.7l-1.7,5.7h-7.2l9.6-29.3h3.6v0l0,0h3.6l9.6,29.3H46L44.2,46.2z M37.1,41h5.6l-2.7-9.1h-0.1L37.1,41z"
          />
        </g>
        <g>
          <path
            className="st5"
            d="M15.2,78.7L15.2,78.7l-7-1.8v-2.4h9.5v1.8h-6l0,0l6,1.7v1.2L11.7,81l0,0h5.9v1.8H8.2v-2.4L15.2,78.7z"
          />
          <path className="st5" d="M17.7,71.2V73H8.2v-1.8H17.7z" />
          <path className="st5" d="M17.7,62.8v1.8l-6.1,3l0,0h6.1v1.8H8.2v-1.8l6.1-3l0,0H8.2v-1.8H17.7z" />
        </g>
      </g>
      <g className="dest-btn" id="dest-C-btn" onMouseUp={() => moveToPoint('c')}>
        <g>
          <g>
            <path
              className="st6"
              d="M34.5,449.2H5.1c-2.8,0-5.1,2.3-5.1,5.1v76.3c0,2.8,2.3,5.1,5.1,5.1h76.3c2.8,0,5.1-2.3,5.1-5.1v-29.3c0-1.6-0.7-3.1-2-4c-17.1-13.5-32.6-29-46.1-46.1C37.5,449.9,36.1,449.2,34.5,449.2z"
            />
          </g>
          <g>
            <path
              className="st1"
              d="M34.5,441.2H5.1c-2.8,0-5.1,2.3-5.1,5.1v76.3c0,2.8,2.3,5.1,5.1,5.1h76.3c2.8,0,5.1-2.3,5.1-5.1v-29.3c0-1.6-0.7-3.1-2-4c-17.1-13.5-32.6-29-46.1-46.1C37.5,441.9,36.1,441.2,34.5,441.2z"
            />
          </g>
        </g>
        <g>
          <path
            className="st7"
            d="M60.4,519.7L60.4,519.7l1.9-7.2h2.5v9.8h-1.9v-6.1l0,0l-1.8,6.2h-1.3l-1.7-6.1l0,0v6.1h-1.9v-9.8h2.5L60.4,519.7z"
          />
          <path
            className="st7"
            d="M70.7,520.2h-2.4l-0.5,2.1h-2l2.8-9.8h2l2.8,9.8h-2L70.7,520.2z M68.6,518.7h1.7l-0.8-3.1h0L68.6,518.7z"
          />
          <path
            className="st7"
            d="M77,516L77,516l1.4-3.5h2.2l-2.4,4.8l2.6,4.9h-2.3l-1.4-3.5h0l-1.4,3.5h-2.2l2.5-4.9l-2.4-4.8h2.2L77,516z"
          />
        </g>
        <g>
          <path
            className="st5"
            d="M51.4,490l0,0.1c0.1,3.3-0.9,5.9-2.8,7.6c-1.9,1.7-4.7,2.6-8.2,2.6c-3.6,0-6.5-1.1-8.7-3.3c-2.2-2.2-3.3-5.1-3.3-8.7v-6.1c0-3.6,1.1-6.5,3.2-8.7c2.1-2.2,4.9-3.3,8.4-3.3c3.7,0,6.6,0.9,8.6,2.6c2,1.7,3,4.2,3,7.5l-0.1,0.1h-6.6c0-1.8-0.4-3.1-1.1-3.9c-0.8-0.8-2-1.2-3.8-1.2c-1.5,0-2.7,0.6-3.5,1.8c-0.8,1.2-1.2,2.9-1.2,4.9v6.2c0,2.1,0.4,3.7,1.3,4.9c0.9,1.2,2.2,1.8,3.9,1.8c1.6,0,2.7-0.4,3.4-1.2c0.7-0.8,1-2.1,1-3.9H51.4z"
          />
        </g>
        <g>
          <path
            className="st7"
            d="M16,464.7L16,464.7l-7-1.8v-2.4h9.5v1.8h-6l0,0l6,1.7v1.2l-5.9,1.7l0,0h5.9v1.8H9v-2.4L16,464.7z"
          />
          <path className="st7" d="M18.5,457.1v1.8H9v-1.8H18.5z" />
          <path className="st7" d="M18.5,448.8v1.8l-6.1,3l0,0h6.1v1.8H9v-1.8l6.1-3l0,0H9v-1.8H18.5z" />
        </g>
      </g>
      <g className="dest-btn" id="dest-B-btn" onMouseUp={() => moveToPoint('b')}>
        <g>
          <g>
            <path
              className="st6"
              d="M441.4,42.5V13.1c0-2.8,2.3-5.1,5.1-5.1h76.3c2.8,0,5.1,2.3,5.1,5.1v76.3c0,2.8-2.3,5.1-5.1,5.1h-29.3c-1.6,0-3.1-0.7-4-2c-13.5-17.1-29-32.6-46.1-46.1C442.2,45.5,441.4,44.1,441.4,42.5z"
            />
          </g>
          <g>
            <path
              className="st1"
              d="M441.4,34.5V5.1c0-2.8,2.3-5.1,5.1-5.1l76.3,0c2.8,0,5.1,2.3,5.1,5.1v76.3c0,2.8-2.3,5.1-5.1,5.1h-29.3c-1.6,0-3.1-0.7-4-2c-13.5-17.1-29-32.6-46.1-46.1C442.2,37.5,441.4,36.1,441.4,34.5z"
            />
          </g>
        </g>
        <g>
          <path
            className="st5"
            d="M478.7,51.8V22.5h9.6c3.6,0,6.5,0.7,8.5,2c2,1.3,3,3.4,3,6c0,1.4-0.3,2.6-1,3.7s-1.6,1.9-3,2.4c1.7,0.4,3,1.2,3.9,2.3c0.8,1.2,1.3,2.5,1.3,4.1c0,2.9-1,5-2.9,6.5c-1.9,1.5-4.7,2.2-8.2,2.2H478.7z M485.5,34.7h2.7c1.6,0,2.9-0.3,3.7-0.9c0.8-0.6,1.2-1.4,1.2-2.5c0-1.2-0.4-2.2-1.2-2.7c-0.8-0.6-2-0.9-3.6-0.9h-2.8V34.7z M485.5,39.2v7.3h4.4c1.4,0,2.5-0.3,3.3-0.9s1.1-1.4,1.1-2.6c0-1.2-0.3-2.2-1-2.8c-0.6-0.6-1.7-1-3.1-1h-0.2H485.5z"
          />
        </g>
        <g>
          <path
            className="st7"
            d="M450.1,12.9L450.1,12.9l1.9-7.2h2.5v9.8h-1.9V9.3l0,0l-1.8,6.2h-1.3l-1.7-6.1l0,0v6.1h-1.9V5.7h2.5L450.1,12.9z"
          />
          <path className="st7" d="M457.9,15.4H456V5.7h1.9V15.4z" />
          <path className="st7" d="M466.4,15.4h-1.9l-3.1-6.2l0,0v6.2h-1.9V5.7h1.9l3.1,6.2l0,0V5.7h1.9V15.4z" />
        </g>
        <g>
          <path
            className="st7"
            d="M515.1,62.8L515.1,62.8l7,1.8V67h-9.5v-1.8h6l0,0l-6-1.7v-1.2l5.9-1.7l0,0h-5.9v-1.8h9.5V61L515.1,62.8z"
          />
          <path
            className="st7"
            d="M514.7,72.7v-2.4l-2.1-0.5v-1.9l9.5,2.7v1.9l-9.5,2.7v-1.9L514.7,72.7z M516.1,70.7v1.6l3-0.8v0L516.1,70.7z"
          />
          <path
            className="st7"
            d="M518.8,78.9L518.8,78.9l3.4,1.4v2.1l-4.7-2.4l-4.8,2.5v-2.2l3.4-1.4v0l-3.4-1.4v-2.1l4.8,2.4l4.7-2.4v2.1L518.8,78.9z"
          />
        </g>
      </g>
      <g className="dest-btn" id="dest-D-btn" onMouseUp={() => moveToPoint('d')}>
        <g>
          <g>
            <path
              className="st6"
              d="M493.2,449.2h29.3c2.8,0,5.1,2.3,5.1,5.1v76.3c0,2.8-2.3,5.1-5.1,5.1h-76.3c-2.8,0-5.1-2.3-5.1-5.1v-29.3c0-1.6,0.7-3.1,2-4c17.1-13.5,32.6-29,46.1-46.1C490.2,449.9,491.7,449.2,493.2,449.2z"
            />
          </g>
          <g>
            <path
              className="st1"
              d="M493.2,441.2h29.3c2.8,0,5.1,2.3,5.1,5.1v76.3c0,2.8-2.3,5.1-5.1,5.1h-76.3c-2.8,0-5.1-2.3-5.1-5.1v-29.3c0-1.6,0.7-3.1,2-4c17.1-13.5,32.6-29,46.1-46.1C490.2,441.9,491.7,441.2,493.2,441.2z"
            />
          </g>
        </g>
        <g>
          <path
            className="st5"
            d="M487.3,471.3c3.4,0,6.3,1.1,8.6,3.4c2.3,2.2,3.5,5.1,3.5,8.6v5.3c0,3.5-1.2,6.4-3.5,8.6c-2.3,2.2-5.2,3.4-8.6,3.4h-10.7v-29.3H487.3z M487.3,495.3c1.5,0,2.8-0.6,3.8-1.9c1-1.3,1.5-2.9,1.5-4.8v-5.3c0-2-0.5-3.6-1.5-4.9c-1-1.3-2.3-1.9-3.8-1.9h-3.9v18.8H487.3z"
          />
        </g>
        <g>
          <path
            className="st7"
            d="M449.3,519.7L449.3,519.7l1.9-7.2h2.5v9.8h-1.9v-6.1l0,0l-1.8,6.2h-1.3l-1.7-6.1l0,0v6.1H445v-9.8h2.5L449.3,519.7z"
          />
          <path
            className="st7"
            d="M459.6,520.2h-2.4l-0.5,2.1h-2l2.8-9.8h2l2.8,9.8h-2L459.6,520.2z M457.5,518.7h1.7l-0.8-3.1h0L457.5,518.7z"
          />
          <path
            className="st7"
            d="M465.9,516L465.9,516l1.4-3.5h2.2l-2.4,4.8l2.6,4.9h-2.3l-1.4-3.5h0l-1.4,3.5h-2.2l2.5-4.9l-2.4-4.8h2.2L465.9,516z"
          />
        </g>
        <g>
          <path
            className="st7"
            d="M515.1,452.4L515.1,452.4l7,1.8v2.4h-9.5v-1.8h6l0,0l-6-1.7v-1.2l5.9-1.7l0,0h-5.9v-1.8h9.5v2.4L515.1,452.4z"
          />
          <path
            className="st7"
            d="M514.7,462.4V460l-2.1-0.5v-1.9l9.5,2.7v1.9l-9.5,2.7v-1.9L514.7,462.4z M516.1,460.4v1.6l3-0.8v0L516.1,460.4z"
          />
          <path
            className="st7"
            d="M518.8,468.5L518.8,468.5l3.4,1.4v2.1l-4.7-2.4l-4.8,2.5V470l3.4-1.4v0l-3.4-1.4V465l4.8,2.4l4.7-2.4v2.1L518.8,468.5z"
          />
        </g>
      </g>
    </svg>
  );
};

export default RawMovePanel;
